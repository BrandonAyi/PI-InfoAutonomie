@(currentPage: com.avaje.ebean.Page[model.Data], currentSortBy: String, currentOrder: String, currentFilter: String, sensors: List[model.Sensor])

@import java.util.List;

@****************************************
* Helper generating navigation links    *
****************************************@
@link(newPage:Int, newSortBy:String) = @{

    var sortBy = currentSortBy
    var order = currentOrder

    if(newSortBy != null) {
        sortBy = newSortBy
        if(currentSortBy == newSortBy) {
            if(currentOrder == "asc") {
                order = "desc"
            } else {
                order = "asc"
            }
        } else {
            order = "asc"
        }
    }

    // Generate the link
    routes.RawDataController.list(newPage, sortBy, order, currentFilter)

}

@**********************************
* Helper generating table headers *
***********************************@
@header(key:String, title:String) = {
    <th class="header @if(currentSortBy == key) @{
        if(currentOrder == "asc") "headerSortDown" else "headerSortUp"
    }">
        <a href="@link(0, key)">@title</a>
    </th>
}

@main("Données brutes") {
<div id="wrapper">

        @nav()

        <div id="page-wrapper">

            <div class="container-fluid">

                <!-- Page Heading -->
                <div class="row">
                    <div class="col-lg-12">
                        <h1 class="page-header">
                            Dashboard <small>Valeurs brutes</small>
                        </h1>
                    </div>
                </div>
                <!-- /.row -->

                @if(currentPage.getTotalRowCount == 0) {

                    <div class="well">
                        <em>Nothing to display</em>
                    </div>

                } else {
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                        <!-- <h3 class="panel-title"><i class="fa fa-money fa-fw"></i> Valeurs brutes</h3> -->
                                    <h3 class="panel-title"> Valeurs brutes</h3>
                                </div>
                                <div class="panel-body">
                                    <div id="actions">

                                        <form action="@link(0, "name")" method="GET" role="form">
                                            <input class="form-group" id="searchbox" name="f" value="@currentFilter" list="sensorList">
                                            <datalist id="sensorList">
                                            @for(sensor <- sensors) {
                                                <option value="@sensor.getId" label="@sensor.getName">
                                                }
                                            </datalist>
                                            <input class="btn btn-default" type="submit" id="searchsubmit" value="Filtrer par nom de capteur" class="btn primary">
                                        </form>

                                        @*<a class="btn success" id="add" href="@routes.Application.create()">Add a new computer</a>*@

                                    </div>
                                    <div class="table-responsive">
                                        <table class="table table-bordered table-hover table-striped">
                                            <thead>
                                                <tr>
                                                    @header("timestamp", "Timestamp")
                                                    @header("label", "Label")
                                                    @header("value", "Valeur")
                                                    @header("mote", "Mote")
                                                </tr>
                                            </thead>
                                            <tbody>
                                            @for(data <- currentPage.getList) {
                                                <tr>
                                                    <td>@data.getTimestamp</td>
                                                    <td>@data.getLabel</td>
                                                    <td>@data.getValue</td>
                                                    <td>@data.getMote</td>
                                                </tr>
                                            }
                                            </tbody>
                                        </table>
                                        <ul class="pagination">
                                            @if(currentPage.hasPrev) {
                                                <li class="prev">
                                                    <a href="@link(currentPage.getPageIndex - 1, null)">&larr; Previous</a>
                                                </li>
                                            } else {
                                                <li class="prev disabled">
                                                    <a>&larr; Previous</a>
                                                </li>
                                            }
                                            <li class="current">
                                                <a>@currentPage.getDisplayXtoYofZ(" à "," sur ")</a>
                                            </li>
                                            @if(currentPage.hasNext) {
                                                <li class="next">
                                                    <a href="@link(currentPage.getPageIndex + 1, null)">Next &rarr;</a>
                                                </li>
                                            } else {
                                                <li class="next disabled">
                                                    <a>Next &rarr;</a>
                                                </li>
                                            }
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                        <!-- /.row -->
                }

            </div>
            <!-- /.container-fluid -->

        </div>
        <!-- /#page-wrapper -->

    </div>
    <!-- /#wrapper -->

}
